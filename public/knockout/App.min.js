var task=require("./Task"),facade=require("./Facade"),ViewModel=function(){function n(){var n=this;this.tasks=ko.observableArray(),this.newTask=ko.observable(new task.Task(undefined,undefined,undefined,!1)),this.errors=ko.validation.group(this.newTask()),this.showCompletedTasks=ko.observable(!0),this.toggleCompletedTasksText=ko.computed(function(){return this.showCompletedTasks()?"Hide completed tasks":"Show completed tasks"},this),facade.Facade.list().done(function(t){$.each(t,function(t,i){n.tasks.push(new task.Task(t,i.name,i.duedate,i.completed==="true"))})})}return n.prototype.addTask=function(){var n=this,t;t=this.newTask(),t.name.isValid()?facade.Facade.create(this.newTask().toJSON()).done(function(t){n.newTask().id=t,n.tasks.push(n.newTask()),n.newTask(new task.Task(undefined,undefined,undefined,!1)),n.errors=ko.validation.group(n.newTask())}):this.errors.showAllMessages()},n.prototype.toggleCompletedTasks=function(){this.showCompletedTasks(!this.showCompletedTasks())},n}();ko.applyBindings(new ViewModel)